US stocks rebound, but S&P 500 ends with 3rd weekly loss